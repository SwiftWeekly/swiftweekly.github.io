---
layout: post
title: ! 'Issue #21'
author: jsq
---

Welcome to issue #21! There hasn't been much news this week, so let's get on to the weekly brief. It was another huge week for proposals and it feels like the core team is moving really fast ahead of WWDC 2016. ðŸ’ª

<!--excerpt-->

### Starter tasks

- [SR-1395](https://bugs.swift.org/browse/SR-1395): [Compiler] Implement [SE-0070](https://github.com/apple/swift-evolution/blob/master/proposals/0070-optional-requirements.md), Make Optional Requirements Objective-C-only
- [SR-1393](https://bugs.swift.org/browse/SR-1393): [SwiftPM] Enforce Swift module import dependencies

These tasks are from previous issues that are still open and unassigned. Don't be shy and ask for help if you need it! ðŸ˜Š

- [SR-1340](https://bugs.swift.org/browse/SR-1340): [Compiler] Implement [SE-0068](https://github.com/apple/swift-evolution/blob/master/proposals/0068-universal-self.md), Expanding Swift `Self` to class members and value types. See the *Accepted proposals* section below for more details.
- [SR-1327](https://bugs.swift.org/browse/SR-1327): [Compiler] Using `dynamicType` on a force unwrapped `nil` value type doesn't throw an exception.
- [SR-1304](https://bugs.swift.org/browse/SR-1304): [SwiftPM] Handle spaces in path when parsing flags from pkgconfig
- [SR-1266](https://bugs.swift.org/browse/SR-1266): Remove duplication between `swift/test` and `swift/validation-test` configuration files. This is a good introduction to the Swift build system, its test suite, and CMake.
- [SR-1263](https://bugs.swift.org/browse/SR-1263): Compiler wrongfully complains of illegal syntax when declaring multiple conformances for a protocol's associated type.
- [SR-1174](https://bugs.swift.org/browse/SR-1174): [llbuild] Properly escape verbose command descriptions
- [SR-580](https://bugs.swift.org/browse/SR-580): [Compiler] Warning should be produced for "variable was never mutated"

{% include task_remind.html %}

### Commits and pull requests

Bouke Haarsma opened a [pull request](https://github.com/apple/swift-package-manager/pull/292) on SwiftPM to use `NSFileHandle` instead of `fopen`, as part of [SR-1005](https://bugs.swift.org/browse/SR-1005). ðŸ‘

Max Howell [implemented](https://github.com/apple/swift-package-manager/pull/296) `--update` in SwiftPM, to determine and apply updates.

Chris Willmore merged a [pull request](https://github.com/apple/swift/pull/2322) with an initial implementation of [SE-0054](https://github.com/apple/swift-evolution/blob/master/proposals/0054-abolish-iuo.md): *Abolish `ImplicitlyUnwrappedOptional` Type*, and made the corresponding [changes](https://github.com/apple/swift-corelibs-foundation/pull/343) to corelibs-foundation. ðŸ‘Œ

Brian Gesiak [merged](https://github.com/apple/swift-corelibs-xctest/pull/86) added `XCTestRun` to corelibs-xctest. *"A major goal for swift-corelibs-xctest is API parity with Apple XCTest. This adds the largest missing API in swift-corelibs-xctest: `XCTestRun`."*

Brian Croom [added](https://github.com/apple/swift-corelibs-xctest/pull/102) class-level `setUp` and `tearDown` methods on `XCTestCase`.

Brian Gesiak opened a [pull request](https://github.com/apple/swift/pull/2364) that implements generating `XCTestCaseProvider` entries on Linux, [SR-710](https://bugs.swift.org/browse/SR-710). ðŸ˜Ž

**@swiftix** [fixed](https://github.com/apple/swift/pull/2370) some Array-related performance regressions introduced by the new indexing model. ðŸ™Œ

Daniel Duan [implemented](https://github.com/apple/swift/pull/2354) support for limiting `inout` capture to `@noescape` contexts, [SE-0035](https://github.com/apple/swift-evolution/blob/master/proposals/0035-limit-inout-capture.md).

Timothy J. Wood [implemented](https://github.com/apple/swift/pull/2384) his accepted proposal (see below), [SE-0061](https://github.com/apple/swift-evolution/blob/master/proposals/0061-autoreleasepool-signature.md): *Add Generic Result and Error Handling to `autoreleasepool()`*.

Ankit Agarwal opened a [pull request](https://github.com/apple/swift-llbuild/pull/28) on swift-llbuild to support `-whole-module-optimization`. *"When enabled swift compiler produces one object file and dependency file for the entire module instead of for each of the sources."*

### Accepted proposals

Stephen Canon's proposal, [SE-0067](https://github.com/apple/swift-evolution/blob/master/proposals/0067-floating-point-protocols.md): *Enhanced Floating Point Protocols*, was [accepted](https://lists.swift.org/pipermail/swift-evolution-announce/2016-May/000121.html) **for Swift 3**. ðŸ‘

> Overall, the feedback on the proposal was very positive, particularly for revision 2 of the proposal.
>
> The most significant feedback was around the naming issues for the various protocol requirements that map onto operators (e.g. â€œisLessThanOrEqualToâ€).  The core team agrees that these are unfortunate - their naming is awkward and they will end up polluting code completion for instances of these numeric types. That said, we are accepting the proposal as written, because the rest of the proposal is great progress in the direction we want to go, accepting it will allow us to get experience living on it, and we can improve this issue with a follow-on proposal.
>
> To address the naming issues, we'd like to explore Tony Allevato's ideas in the â€œImprove operator requirements in protocolsâ€ thread on swift-evolution. If that doesn't work out, we request that these members be reworked to be named static members in the protocol, which will address the code completion issue.
>
> Thank you to Stephen Canon for driving the design and implementation of this, and to Max Moiseev (and several others) who have been contributing to the implementation.  This is a fundamental step to moving Swift numerics forward!

Doug Gregor's proposal, [SE-0071](https://github.com/apple/swift-evolution/blob/master/proposals/0071-member-keywords.md): *Allow (most) keywords in member references*, was [accepted](https://lists.swift.org/pipermail/swift-evolution-announce/2016-May/000122.html) **for Swift 3**. ðŸŽ‰ *"The discussion on swift-evolution was minimal, but entirely positive. This proposal eliminates a syntactic problem that would otherwise be new to Swift 3, with no apparent downside. What's not to love?"*

Timothy J. Wood's proposal, [SE-0061](https://github.com/apple/swift-evolution/blob/master/proposals/0061-autoreleasepool-signature.md): *Add Generic Result and Error Handling to `autoreleasepool()`*, was [accepted](https://lists.swift.org/pipermail/swift-evolution-announce/2016-May/000123.html) **for Swift 3**. ðŸ™Œ *"The feedback on the proposal was minimal, but all positive."* Work is being tracked at [SR-842](https://bugs.swift.org/browse/SR-842).

Doug Gregor's proposal, [SE-0070](https://github.com/apple/swift-evolution/blob/master/proposals/0070-optional-requirements.md): *Make Optional Requirements Objective-C-only*, was [accepted](https://lists.swift.org/pipermail/swift-evolution-announce/2016-May/000124.html) **for Swift 3**. ðŸ™‡ *"SE-0070 is the minimal solution for clarifying optional requirements without making their important use cases overtly awkward. The core team requests that the diagnostics generated by mistakes using optional requirements be revised to make it clear that it is an Objective-C only feature."* (A starter task for this listed is above.)

### Proposals in review

Jacob Bandes-Storch's proposal, [SE-0017](https://github.com/apple/swift-evolution/blob/master/proposals/0017-convert-unmanaged-to-use-unsafepointer.md): *Change Unmanaged to use UnsafePointer*, is under [review](https://lists.swift.org/pipermail/swift-evolution-announce/2016-April/000117.html). Jacob proposes replacing the usage of `COpaquePointer` with `UnsafePointer<Void>` and `UnsafeMutablePointer<Void>` in the `Unmanaged` API to reduce bloated code where users must convert from `UnsafePointer` to `COpaquePointer` to `Unmanaged`.

Kevin Ballard's proposal, [SE-0032](https://github.com/apple/swift-evolution/blob/master/proposals/0032-sequencetype-find.md): *Add `find` method to `Sequence`*, is under [review](https://lists.swift.org/pipermail/swift-evolution-announce/2016-April/000118.html). Kevin proposes to add a new extension method to `Sequence` called `find()` that returns the found element. *"It's often useful to find the first element of a sequence that passes some given predicate. [...] For Sequences, there's no easy way to do this besides a manual loop that doesn't require filtering the entire sequence and producing an array."*

Patrick Pijnappel's proposal, [SE-0052](https://github.com/apple/swift-evolution/blob/master/proposals/0052-iterator-post-nil-guarantee.md): *Change IteratorType post-nil guarantee*, is under [review](https://lists.swift.org/pipermail/swift-evolution-announce/2016-April/000120.html).

> Currently, the documentation for `IteratorType.next()` has the precondition that when calling `next()`, no preceding call to `next()` should have returned `nil`, and in fact encourages implementations to raise a `preconditionFailure()` for violations of this requirement. However, all current 27 `IteratorType` implementations in the standard library return `nil` indefinitely. Many users are likely unaware of the precondition, expecting all iterators to return `nil` indefinitely and writing code that might rely on this assumption.

Kevin Ballard's proposal, [SE-0045](https://github.com/apple/swift-evolution/blob/master/proposals/0045-scan-takewhile-dropwhile.md): *Add `scan`, `prefix(while:)`, `drop(while:)`, and `unfold` to the stdlib*, is under [review](https://lists.swift.org/pipermail/swift-evolution-announce/2016-April/000119.html). Kevin proposes adding 3 common (but currently missing from the stdlib) `Sequence` functions &mdash; `scan(_:combine:)`, `prefix(while:)`, and `drop(while:)`, with overrides as appropriate on `Collection`, `LazySequenceProtocol`, and `LazyCollectionProtocol`, as well as a global function `unfold(_:applying:)`.

Joe Groff's proposal, [SE-0060](https://github.com/apple/swift-evolution/blob/master/proposals/0060-defaulted-parameter-order.md): *Enforcing order of defaulted parameters*, is under [review](https://lists.swift.org/pipermail/swift-evolution-announce/2016-May/000125.html). *"Swift generally follows in the Smalltalk/Objective-C tradition of compound method names with significant, order-sensitive argument labels, but an exception is made for parameters with default arguments. We should remove this exception."*

FÃ©lix Cloutier's and Gwendal RouÃ©'s proposal, [SE-0073](https://github.com/apple/swift-evolution/blob/master/proposals/0073-noescape-once.md): *Marking closures as executing exactly once*, is under [review](https://lists.swift.org/pipermail/swift-evolution-announce/2016-May/000126.html). *"This proposal introduces an optional `once` argument to the `@noescape` attribute. The `@noescape(once)` attribute enforces that the closure does not escape, and that it is run exactly once on any code path returning from the function."*

A proposal from Lorenzo Racca, Jeff Hajewski and Nate Cook, [SE-0074](https://github.com/apple/swift-evolution/blob/master/proposals/0074-binary-search.md): *Implementation of Binary Search functions*, is under [review](https://lists.swift.org/pipermail/swift-evolution-announce/2016-May/000127.html). *"Swift does not offer any way to efficiently search sorted collections. This proposal seeks to add a few different functions that implement the binary search algorithm."*

Janosch Hildebrand's proposal, [SE-0076](https://github.com/apple/swift-evolution/blob/master/proposals/0076-copying-to-unsafe-mutable-pointer-with-unsafe-pointer-source.md): *Add overrides taking an `UnsafePointer` source to non-destructive copying methods on `UnsafeMutablePointer`*, is under [review](https://lists.swift.org/pipermail/swift-evolution-announce/2016-May/000128.html). *"`UnsafeMutablePointer` includes several methods to non-destructively copy elements from memory pointed to by another `UnsafeMutablePointer` instance. I propose adding overloads of these methods to `UnsafeMutablePointer` that allow an `UnsafePointer` source."*

Nate Cook's and Sergey Bolshedvorsky's proposal, [SE-0078](https://github.com/apple/swift-evolution/blob/master/proposals/0078-rotate-algorithm.md): *Implement a rotate algorithm, equivalent to `std::rotate()` in C++*, is under [review](https://lists.swift.org/pipermail/swift-evolution-announce/2016-May/000129.html). *"This proposal is to add rotation and in-place reversing methods to Swift's standard library collections."*

Matthew Johnson's proposal, [SE-0080](https://github.com/apple/swift-evolution/blob/master/proposals/0080-failable-numeric-initializers.md): *Failable Numeric Conversion Initializers*, is under [review](https://lists.swift.org/pipermail/swift-evolution-announce/2016-May/000130.html).

> Swift numeric types all currently have a family of conversion initializers. In many use cases they leave a lot to be desired. Initializing an integer type with a floating point value will truncate any fractional portion of the number. Initializing with an out-of-range value traps.
>
> This proposal is to add a new family of conversion initializers to all numeric types that either complete successfully without loss of information or throw an error.

### Mailing lists

> TODO

### Finally

And finally &mdash; the [error message of the day](https://twitter.com/FlexMonkey/status/727036117082583040)! Bummers. ðŸ¤” ðŸ˜‚
